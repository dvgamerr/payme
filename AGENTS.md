# PayMe - Full-Stack Budget Tracker

## üìã ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° (Overview)

‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ç‡∏≠‡∏á **PayMe** ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏î‡πâ‡∏ß‡∏¢ **Bun.js + Astro.js + Svelte** (Vanilla JavaScript) ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏ô‡πâ‡∏ô‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏á‡πà‡∏≤‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏±‡∏Å‡∏©‡∏≤

### ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ (Technology Stack)

| ‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö (Component) | ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ (Technology)  |
| ---------------------- | ----------------------------- |
| **Backend Framework**  | **Bun.js + Astro API Routes** |
| **Frontend Framework** | **Astro.js 4 + Svelte 4**     |
| **Language**           | **Vanilla JavaScript**        |
| **Database Driver**    | **better-sqlite3 (sync)**     |
| **State Management**   | **Svelte Stores**             |
| **Build Tool**         | **Bun + Astro**               |

---

## ‡∏™‡∏¥‡πà‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏´‡πâ‡∏≤‡∏°‡∏•‡∏∑‡∏°‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

- ‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏™‡∏°‡∏≠ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏õ ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

## ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å (Key Features)

### 1. ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô (Infrastructure)

- ‡πÉ‡∏ä‡πâ `package.json` ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ dependencies (Astro, Svelte, Tailwind CSS v4)
- ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÇ‡∏Ñ‡πâ‡∏î‡∏î‡πâ‡∏ß‡∏¢ **Prettier ‡πÅ‡∏•‡∏∞ Commitlint**
  - Prettier: ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö `semi: false` ‡πÅ‡∏•‡∏∞ `singleQuote: true` (‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á‡∏à‡∏±‡∏î format ‡πÉ‡∏´‡πâ Svelte/Astro)
  - Husky + lint-staged: **‡∏£‡∏±‡∏ô Prettier ‡∏Å‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà stage ‡∏Å‡πà‡∏≠‡∏ô commit** (format-on-commit)
- ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• SQLite (`payme.db`) ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏ö Migration
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Theme (Dark/Light Mode)

### 2. ‡∏£‡∏∞‡∏ö‡∏ö‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô (Authentication)

- ‡∏´‡∏ô‡πâ‡∏≤ Login ‡πÅ‡∏•‡∏∞ Register
- ‡∏£‡∏∞‡∏ö‡∏ö Session ‡πÅ‡∏ö‡∏ö Cookie-based ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
- Middleware ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á (Protected Routes)
- ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ State ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏î‡πâ‡∏ß‡∏¢ Svelte Store

### 3. ‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö UI (UI Components)

**‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡πÉ‡∏ä‡πâ Component ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏™‡∏°‡∏≠**

‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á UI component ‡πÉ‡∏´‡∏°‡πà ‡∏ï‡πâ‡∏≠‡∏á**‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `src/components/ui/` ‡∏Å‡πà‡∏≠‡∏ô** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ component ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ:

- UI ‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö (Consistency)
- ‡∏•‡∏î‡πÇ‡∏Ñ‡πâ‡∏î‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô (DRY Principle)
- ‡∏á‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏±‡∏Å‡∏©‡∏≤ (Maintainability)
- ‡∏°‡∏µ Theme support (Dark/Light Mode) ‡πÉ‡∏ô‡∏ï‡∏±‡∏ß

#### Basic UI Components (`src/components/ui/`)

- `Summary.svelte`: ‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô 4 ‡∏î‡πâ‡∏≤‡∏ô
- `MonthNav.svelte`: ‡πÅ‡∏ñ‡∏ö‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
- `IncomeSection.svelte`: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö
- `FixedExpenses.svelte`: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà
- `BudgetSection.svelte`: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏£‡∏≤‡∏¢‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
- `ItemsSection.svelte`: ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏ö‡∏ö Inline
- `CategoryModal.svelte`: Modal ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ categories (CRUD)
- `Stats.svelte`: ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°

#### UI Development Guidelines

**DO ‚úÖ:**

- ‡πÉ‡∏ä‡πâ Basic UI Components ‡∏à‡∏≤‡∏Å `src/components/ui/` ‡πÄ‡∏™‡∏°‡∏≠
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö props ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- ‡πÉ‡∏ä‡πâ `bind:value` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö two-way binding
- ‡πÉ‡∏ä‡πâ `on:event` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö event handling
- ‡∏™‡πà‡∏á `$$restProps` ‡∏ï‡πà‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ flexibility

**DON'T ‚ùå:**

- ‡∏™‡∏£‡πâ‡∏≤‡∏á `<input>` ‡∏´‡∏£‡∏∑‡∏≠ `<button>` ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏≠‡∏á (‡πÉ‡∏ä‡πâ `Input.svelte` ‡πÅ‡∏•‡∏∞ `Button.svelte` ‡πÅ‡∏ó‡∏ô)
- ‡∏™‡∏£‡πâ‡∏≤‡∏á modal/dialog ‡πÉ‡∏´‡∏°‡πà (‡πÉ‡∏ä‡πâ `Modal.svelte`)
- ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô inline styles ‡∏ã‡πâ‡∏≥‡πÜ (‡πÉ‡∏ä‡πâ Tailwind classes ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á component ‡πÉ‡∏´‡∏°‡πà)
- ‡∏•‡∏∑‡∏°‡πÄ‡∏ä‡πá‡∏Ñ theme support (‡πÉ‡∏ä‡πâ Tailwind color tokens: `text-foreground`, `bg-background`, etc.)

### 4. ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Data Management)

- **API Endpoints**: REST API ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô (CRUD)
  - Income, Fixed Expenses, Budgets, Spending Items
  - Month Management (‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÉ‡∏´‡∏°‡πà, ‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î‡∏á‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)
  - Dashboard Statistics
- **Data Stores**: ‡∏£‡∏∞‡∏ö‡∏ö State Management ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô Frontend

### 5. ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (Additional Features)

- **Import/Export**: ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö JSON
- **Analytics**: ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞ Variance Analysis
- **Savings**: ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Å‡∏©‡∏µ‡∏¢‡∏ì

---

## üí° ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ó‡∏≤‡∏á‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ (Design Decisions)

1. **‡πÉ‡∏ä‡πâ Vanilla JavaScript**: ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ TypeScript ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ JSDoc ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á Build Process (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï: 17 ‡∏°.‡∏Ñ. 2026)
2. **‡πÉ‡∏ä‡πâ LayerCake**: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ Library ‡∏ô‡∏µ‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏õ‡πá‡∏ô Svelte-native
3. **Hybrid Routing**: ‡πÉ‡∏ä‡πâ Astro ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Routing ‡∏´‡∏•‡∏±‡∏Å ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ Svelte ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Interactive Components ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤
4. **SSR Mode**: ‡πÉ‡∏ä‡πâ Astro ‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î Server Action ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Authentication ‡πÅ‡∏•‡∏∞ Security ‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏¢‡∏¥‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô
5. **No Semicolons**: ‡πÉ‡∏ä‡πâ code style ‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏°‡∏µ semicolons ‡πÇ‡∏î‡∏¢‡πÉ‡∏´‡πâ **Prettier ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏´‡∏•‡πà‡∏á‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (single source of truth)** (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï: 17 ‡∏°.‡∏Ñ. 2026)

---

## üìù Code Style Guidelines (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï: 17 ‡∏°.‡∏Ñ. 2026)

### ‡∏†‡∏≤‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î

- **‡∏†‡∏≤‡∏©‡∏≤**: Vanilla JavaScript (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ TypeScript)
- **Documentation**: ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ JSDoc comments
- **Formatting**: ‡πÉ‡∏ä‡πâ **Prettier ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô** (‡∏´‡πâ‡∏≤‡∏°‡∏à‡∏±‡∏î format ‡πÅ‡∏ö‡∏ö manual ‡πÅ‡∏•‡πâ‡∏ß‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô Prettier)
- **Semicolons**: ‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ (`semi: false`)
- **Quotes**: Single quotes ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (`singleQuote: true`)
- **Functions**: ‡πÉ‡∏ä‡πâ **arrow function + const** ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å
  - ‡∏õ‡∏Å‡∏ï‡∏¥: `const handleAdd = () => {}`
  - async: `const handleAdd = async () => {}`
  - ‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á: `function handleAdd() {}` (‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á hoist)

### Scripts ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

```bash
bun run format:check  # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ format ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
bun run format        # ‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Prettier (write)
```

Prettier Configuration (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á)

```json
{
  "semi": false,
  "singleQuote": true
}
```

---

### ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥ Migration

1. **‡πÅ‡∏Å‡πâ schema ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏™‡∏°‡∏≠** - ‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô SQL migration ‡πÄ‡∏≠‡∏á
2. **Generate ‡∏î‡πâ‡∏ß‡∏¢ drizzle-kit** - ‡πÉ‡∏´‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á SQL ‡πÉ‡∏´‡πâ
3. **Review SQL ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ** - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà generate ‡∏≠‡∏≠‡∏Å‡∏°‡∏≤
4. **Execute ‡πÅ‡∏ö‡∏ö controlled** - ‡πÉ‡∏ä‡πâ script ‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
5. **Version control** - commit ‡∏ó‡∏±‡πâ‡∏á schema ‡πÅ‡∏•‡∏∞ migration files

---

## üèóÔ∏è API Development Guidelines (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï: 18 ‡∏°.‡∏Ñ. 2026)

### ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô

**‡∏´‡πâ‡∏≤‡∏° Technical Debt** - ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î:

1. ‚ùå **‡∏´‡πâ‡∏≤‡∏°** ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô try-catch ‡∏ã‡πâ‡∏≥‡πÜ ‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å endpoint
2. ‚ùå **‡∏´‡πâ‡∏≤‡∏°** ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô `new Response(JSON.stringify(...))` ‡∏ã‡πâ‡∏≥‡πÜ
3. ‚ùå **‡∏´‡πâ‡∏≤‡∏°** ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô validation logic ‡∏ã‡πâ‡∏≥‡πÜ
4. ‚ùå **‡∏´‡πâ‡∏≤‡∏°** ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô ownership verification ‡∏ã‡πâ‡∏≥‡πÜ
5. ‚ùå **‡∏´‡πâ‡∏≤‡∏°** ‡πÉ‡∏ä‡πâ `function` declarations (‡πÉ‡∏ä‡πâ arrow functions ‡πÅ‡∏ó‡∏ô)

### ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á API Endpoint ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô

- ‡πÉ‡∏ä‡πâ `export const METHOD = async () => {}` ‡πÅ‡∏ó‡∏ô `export async function METHOD()`
- Wrap logic ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏î‡πâ‡∏ß‡∏¢ `handleApiRequest()` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ error ‡πÅ‡∏ö‡∏ö‡∏£‡∏ß‡∏°
- ‡πÉ‡∏ä‡πâ `requireAuth()` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö protected endpoints
- ‡πÉ‡∏ä‡πâ `validateRequired()` ‡πÅ‡∏•‡∏∞ `parseIntParam()` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö validation
- Return ‡∏î‡πâ‡∏ß‡∏¢ `jsonSuccess()` ‡∏´‡∏£‡∏∑‡∏≠ throw Error (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Response ‡πÄ‡∏≠‡∏á)

### Utility Functions ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ

**Response Utilities** (`src/lib/api-utils.js`):

- `jsonSuccess(data, status)` - ‡∏™‡∏£‡πâ‡∏≤‡∏á success response
- `jsonError(message, status)` - ‡∏™‡∏£‡πâ‡∏≤‡∏á error response
- `validateRequired(body, fields)` - validate required fields (auto throw)
- `parseIntParam(param, name)` - parse integer parameter (auto throw)
- `handleApiRequest(handler)` - centralized error handling
- `setSessionCookie(cookies, sessionId, expiresAt)` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ session cookie

**Database Helpers** (`src/lib/db-helpers.js`):

- `getMonthByIdForUser(monthId, userId)` - ‡∏î‡∏∂‡∏á month ‡∏û‡∏£‡πâ‡∏≠‡∏° check ownership
- `getCategoryByIdForUser(categoryId, userId)` - ‡∏î‡∏∂‡∏á category ‡∏û‡∏£‡πâ‡∏≠‡∏° check ownership
- `verifyResourceOwnership(table, id, userId, name)` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö ownership ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
- `getNextDisplayOrder(table, userId)` - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì display order ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ

**Authentication Middleware** (`src/lib/middleware.js`):

- `requireAuth(cookies)` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö authentication (throw 'Unauthorized' ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô)
- `withAuth(handler)` - optional wrapper ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö authenticated handlers

### Error Handling Standards

**Error ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô HTTP Status ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥** ‡πÇ‡∏î‡∏¢ `handleApiRequest`:

| Error Message Pattern          | HTTP Status |
| ------------------------------ | ----------- |
| `'Unauthorized'`               | 401         |
| `'...not found'`               | 404         |
| `'...already exists'`          | 409         |
| `'Missing required fields...'` | 400         |
| ‡∏≠‡∏∑‡πà‡∏ô‡πÜ                          | 500         |

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£ throw error:**

- ‡πÉ‡∏ä‡πâ `throw new Error('message')` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö error ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
- ‡πÉ‡∏ä‡πâ `validateRequired()` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö validation (‡∏à‡∏∞ throw ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
- **‡∏´‡πâ‡∏≤‡∏°** return `new Response(JSON.stringify({error}), {status})` ‡πÄ‡∏≠‡∏á

### Code Organization Principles

**1. ‡πÅ‡∏¢‡∏Å Helper Functions** - ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ verification logic ‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô ‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á helper function ‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å‡∏°‡∏≤

**2. DRY Principle** - ‡πÉ‡∏ä‡πâ utilities ‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏ã‡πâ‡∏≥‡πÜ ‡πÄ‡∏ä‡πà‡∏ô:

- ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô try-catch ‚Üí ‡πÉ‡∏ä‡πâ `handleApiRequest`
- ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞ validate ‡∏î‡πâ‡∏ß‡∏¢ if-else ‚Üí ‡πÉ‡∏ä‡πâ `validateRequired`
- ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞ parse params ‡πÄ‡∏≠‡∏á ‚Üí ‡πÉ‡∏ä‡πâ `parseIntParam`

**3. Consistent Naming** - ‡πÉ‡∏ä‡πâ snake_case ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö API request/response ‡πÅ‡∏•‡∏∞ camelCase ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö database operations (Drizzle ORM)

### Checklist ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö API Endpoint ‡πÉ‡∏´‡∏°‡πà

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á endpoint ‡πÉ‡∏´‡∏°‡πà ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:

- ‡πÉ‡∏ä‡πâ `export const` ‡πÅ‡∏ó‡∏ô `export async function`
- ‡πÉ‡∏ä‡πâ arrow function `= async () =>`
- ‡πÉ‡∏ä‡πâ `handleApiRequest` wrap ‡∏ó‡∏∏‡∏Å handler
- ‡πÉ‡∏ä‡πâ `requireAuth` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö protected endpoints
- ‡πÉ‡∏ä‡πâ `validateRequired` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö validation
- ‡πÉ‡∏ä‡πâ `parseIntParam` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö integer parameters
- ‡πÉ‡∏ä‡πâ `jsonSuccess` ‡∏´‡∏£‡∏∑‡∏≠ `jsonError` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö response
- ‡πÉ‡∏ä‡πâ helper functions ‡∏à‡∏≤‡∏Å `db-helpers.js` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ownership verification
- **‡∏´‡πâ‡∏≤‡∏°** ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô try-catch ‡πÄ‡∏≠‡∏á
- **‡∏´‡πâ‡∏≤‡∏°** ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô `new Response(JSON.stringify(...))` ‡πÄ‡∏≠‡∏á
- ‡∏ú‡πà‡∏≤‡∏ô `bun run format` ‡πÅ‡∏•‡∏∞ `bun run lint`

### Quick Reference

**‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å:**

- `src/lib/api-utils.js` - Response ‡πÅ‡∏•‡∏∞ validation utilities
- `src/lib/db-helpers.js` - Database helpers
- `src/lib/middleware.js` - Authentication middleware

**‡πÅ‡∏û‡∏ó‡πÄ‡∏ó‡∏¥‡∏£‡πå‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏≥:**

1. **‡∏ó‡∏∏‡∏Å endpoint** ‡πÉ‡∏ä‡πâ `handleApiRequest`
2. **Protected endpoints** ‡πÉ‡∏ä‡πâ `requireAuth`
3. **Validation** ‡πÉ‡∏ä‡πâ `validateRequired`
4. **Success response** ‡πÉ‡∏ä‡πâ `jsonSuccess`
5. **Error response** ‡πÉ‡∏ä‡πâ `throw new Error(...)` (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á return)

---

## üéØ Best Practices Summary

### DO ‚úÖ

- ‡πÉ‡∏ä‡πâ utility functions ‡∏à‡∏≤‡∏Å `api-utils.js` ‡πÅ‡∏•‡∏∞ `db-helpers.js`
- ‡πÉ‡∏ä‡πâ arrow functions ‡∏Å‡∏±‡∏ö const
- ‡πÉ‡∏ä‡πâ `handleApiRequest` ‡πÄ‡∏õ‡πá‡∏ô error handler ‡∏£‡∏ß‡∏°
- Validate inputs ‡∏î‡πâ‡∏ß‡∏¢ `validateRequired`
- Parse parameters ‡∏î‡πâ‡∏ß‡∏¢ `parseIntParam`
- ‡πÅ‡∏¢‡∏Å helper functions ‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠ logic ‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô
- ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÅ‡∏ö‡∏ö‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô descriptive
- ‡πÉ‡∏ä‡πâ Prettier format ‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏™‡∏°‡∏≠

### DON'T ‚ùå

- ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô try-catch ‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å endpoint
- ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô `new Response(JSON.stringify(...))` ‡∏ã‡πâ‡∏≥‡πÜ
- ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô validation logic ‡∏ã‡πâ‡∏≥‡πÜ
- ‡πÉ‡∏ä‡πâ `function` declarations (‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)
- Return Response ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡πÉ‡∏ô error cases (‡πÉ‡∏ä‡πâ throw Error ‡πÅ‡∏ó‡∏ô)
- ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô ownership verification ‡∏ã‡πâ‡∏≥‡πÜ
- ‡∏•‡∏∑‡∏°‡∏£‡∏±‡∏ô `bun run format` ‡∏Å‡πà‡∏≠‡∏ô commit

---
